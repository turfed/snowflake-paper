# proxy-type.csv and proxy-nat-type.csv are generated by the scripts at
# https://gitlab.torproject.org/dcf/snowflake-graphs

all: \
	proxy-type.pdf \
	proxy-nat-type.pdf
.PHONY: all

proxy-type.tmp.pdf: .EXTRA_PREREQS = proxy-type.r ../common.r
proxy-type.tmp.pdf: proxy-type.csv
	Rscript proxy-type.r "$<" "$@"

proxy-nat-type.tmp.pdf: .EXTRA_PREREQS = proxy-nat-type.r ../common.r
proxy-nat-type.tmp.pdf: proxy-nat-type.csv
	Rscript proxy-nat-type.r "$<" "$@"

# Embed fonts.
.INTERMEDIATE: proxy-type.tmp.pdf proxy-nat-type.tmp.pdf
%.pdf: %.tmp.pdf
	gs -q -dSAFER -dNOPAUSE -dBATCH -sDEVICE=pdfwrite -sOutputFile="$@" -dCompatibilityLevel=1.5 -dEmbedAllFonts=true -c '<</NeverEmbed []>> setdistillerparams' -f "$<"

.DELETE_ON_ERROR:
