# userstats-bridge-transport-multi.csv,
# userstats-bridge-combined-multi.csv, and
# bandwidth-multi.csv are generated by the scripts at
# https://gitlab.torproject.org/dcf/snowflake-graphs

COUNTRIES = cn ir ru tm
COUNTRY_GRAPHS = $(addprefix users-,$(addsuffix .pdf,$(COUNTRIES)))

all: \
	users-global.pdf \
	$(COUNTRY_GRAPHS)
.PHONY: all

users-global.pdf: .EXTRA_PREREQS = users-global.r ../common.r
users-global.pdf: userstats-bridge-transport-multi.csv bandwidth-multi.csv
	Rscript users-global.r $^ "$@"

$(COUNTRY_GRAPHS): .EXTRA_PREREQS = users-country.r ../common.r
$(COUNTRY_GRAPHS)&: userstats-bridge-combined-multi.csv
	Rscript users-country.r "$<"

.DELETE_ON_ERROR:
